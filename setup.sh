#!/bin/bash\n\n# Learner Dashboard Setup Script\necho \"🚀 Setting up Learner Dashboard...\"\n\n# Check if Node.js is installed\nif ! command -v node &> /dev/null; then\n    echo \"❌ Node.js is not installed. Please install Node.js first.\"\n    exit 1\nfi\n\n# Check if AWS CLI is installed\nif ! command -v aws &> /dev/null; then\n    echo \"❌ AWS CLI is not installed. Please install AWS CLI first.\"\n    exit 1\nfi\n\n# Check AWS credentials\nif ! aws sts get-caller-identity &> /dev/null; then\n    echo \"❌ AWS credentials not configured. Please run 'aws configure' first.\"\n    exit 1\nfi\n\necho \"✅ Prerequisites check passed!\"\n\n# Check if CDK is installed globally\nif ! command -v cdk &> /dev/null; then\n    echo \"📦 Installing AWS CDK...\"\n    npm install -g aws-cdk\nfi\n\n# Install backend dependencies\necho \"📦 Installing backend dependencies...\"\nnpm install\n\n# Bootstrap CDK (if not already done)\necho \"🏗️ Bootstrapping CDK...\"\ncdk bootstrap\n\n# Deploy infrastructure\necho \"☁️ Deploying AWS infrastructure...\"\ncdk deploy --require-approval never\n\n# Get the S3 bucket URL\necho \"📋 Getting S3 bucket information...\"\nBUCKET_URL=$(aws cloudformation describe-stacks --stack-name LearnerDashboardStack --query \"Stacks[0].Outputs[?OutputKey=='BucketUrl'].OutputValue\" --output text 2>/dev/null)\n\n# Install frontend dependencies\necho \"📦 Installing frontend dependencies...\"\ncd frontend\nnpm install\n\n# Update environment configuration if bucket URL was retrieved\nif [ -n \"$BUCKET_URL\" ]; then\n    echo \"📝 Updating frontend configuration...\"\n    echo \"REACT_APP_S3_BUCKET_URL=$BUCKET_URL\" > .env.local\n    echo \"✅ S3 Bucket URL configured: $BUCKET_URL\"\nelse\n    echo \"⚠️ Could not retrieve S3 bucket URL. You may need to configure it manually.\"\n    echo \"Check the AWS CloudFormation console for the bucket URL.\"\nfi\n\necho \"✅ Setup complete!\"\necho \"📋 Next steps:\"\necho \"   1. Run 'npm run dev' in the frontend directory to start the development server\"\necho \"   2. The S3 bucket has been created and learners.csv uploaded\"\necho \"   3. Open http://localhost:3000 to view the dashboard\"\necho \"\"\necho \"📖 For more information, see the README.md file\"\necho \"🐛 If you encounter issues, check the troubleshooting section in README.md\""